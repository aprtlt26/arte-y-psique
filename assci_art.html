<!DOCTYPE html>
<html>
<body>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">


    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.0/p5.js"></script>
    <script>


        // Declarar el AudioContext globalmente
let audioCtx;



        
  document.addEventListener('contextmenu', function(e) {
    e.preventDefault();
    alert('El clic derecho está desactivado en esta página.');
  }, false);

 


  document.addEventListener('DOMContentLoaded', (event) => {
    verificarPermisoMicrofono();
});

function verificarPermisoMicrofono() {
    navigator.permissions.query({ name: 'microphone' })
        .then((permissionStatus) => {
            // 'prompt' significa que no se ha pedido el permiso todavía
            if (permissionStatus.state === 'prompt') {
                solicitarPermisoMicrofono();
            } else if (permissionStatus.state === 'granted') {
                alert("El permiso para el micrófono ya ha sido concedido.");
                // Ya puedes empezar a usar el micrófono
            } else {
                alert("El permiso para el micrófono ha sido denegado.");
                // Aquí puedes guiar al usuario sobre cómo cambiar los permisos del micrófono
            }
        })
        .catch((error) => {
            console.log('Error al verificar los permisos del micrófono:', error);
        });
}

// Aquí iría la función solicitarPermisoMicrofono() que ya tienes

</script>
<style>

body {
    background-color: black;
    color: #e6e6e6;
    font-family: 'Courier New', Courier, monospace;
    margin: 0;
    overflow-y: hidden;
    overflow-x: hidden;
}



#ascii-art, #ascii-cat {
   display:flex;
    word-wrap: break-word;
    font-size: 5px;
    line-height: 1;
    z-index: 2000;
    cursor: pointer;
    margin: auto;

 }

    
#ascii-cat{
    display: flex;
    white-space:pre-wrap;
    word-wrap: break-word;
    font-size: 4px;
    cursor: pointer;
    margin: 20px;
   

}
    #ascii-container {
display: flex;    
height: auto; /* Asegúrate de que pueda expandirse para ajustarse al nuevo tamaño del canvas */
    z-index: -100;
margin-top: -200px;
margin-left: 100px; /* Centra horizontalmente */
    margin-right: auto;
}


#p5-canvas {
    position: relative;
    top: 0;
    left: 0;
    z-index: 10; /* Ajustar según sea necesario */
    cursor: pointer;
   

}

#tree-sketch-container {
    width: 900px; /* Ancho del canvas */
    height: 500px; /* Altura del canvas */
    position: relative;
    top: 0;
    left: 0;
    font-size: 3px;
    margin-left: 290px;
    z-index: 1000;
    padding-bottom: 200px;
}


#color-bar-sketch-container{
   display: flex;
   justify-content: center; /* Centra los elementos horizontalmente dentro del contenedor */
    align-items: center;
    z-index: 100;
    margin-left:auto;
    margin-right: auto;
    margin: auto;
    margin-top: -500px;
    width: 200px; /* Ancho fijo del contenedor */
    height: 200px;
    position: relative; /* Habilita el posicionamiento relativo */
    overflow: hidden; 
}


#ascii-art-container{
  position: absolute;
  top: -10;
  left: 0;
  width: 100%;
  height: 100%;
  margin:10px;
  margin-left: 150px;
}



#ascii-sol {
    font-size: 3px;
    cursor: pointer;
    position: absolute; /* Posicionamiento absoluto dentro de su contenedor */
    top: 0;             /* Alinea la parte superior del elemento con la parte superior del contenedor */
    right: 0;           /* Alinea el lado derecho del elemento con el lado derecho del contenedor */
    margin-right: 10px; /* Agrega un pequeño margen derecho, si es necesario */
    z-index: 1000;      /* Asegura que el elemento sea visible sobre otros posibles elementos */
}

#ascii-luna {
    font-size: 4px;
    z-index: 1000; 
    cursor: pointer;
    position: absolute; /* Posicionamiento absoluto dentro de su contenedor */
    top: 0;             /* Alinea la parte superior del elemento con la parte superior del contenedor */
    left: 0;

}

#rain-sketch-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1000; /* Fondo */
            pointer-events: none; /* Permite hacer clic a través del contenedor */

        }

       /* Reglas de media query para dispositivos con ancho máximo de 600px */
@media (max-width: 600px) {
    body {
        overflow-y: hidden; /* Permite desplazamiento vertical si es necesario */
    }

    #ascii-art  {
        display: flex;

        font-size: 4px; /* Ajusta el tamaño de la fuente para visibilidad en pantallas pequeñas */
        margin: 0 60px; /* Agrega márgenes laterales para no tocar los bordes de la pantalla */
        margin-top: -140px;
    }
    #ascii-cat {
        font-size: 3px;
        margin-top: -100px;


    }

    #ascii-sol{
        display: flex;
        font-size: 2.3px; /* Ajusta el tamaño de la fuente para visibilidad en pantallas pequeñas */
        margin-left: 0;
       z-index: 2000;

    }
    #ascii-luna{
        margin-left: 0;
        margin-right:0;
        font-size: 2.8px;
        margin: 3px;

    }

    #tree-sketch-container  {
        margin-left: 0;
        margin-right:0;
        width: 5%; /* Reduce el ancho para evitar desbordamiento horizontal */
    z-index: -100;
    }
    #color-bar-sketch-container{
display:flex;
margin-left: 0px; /* Ajusta el margen izquierdo para centrar */
        margin-right: 0px; /* Ajusta el margen derecho para centrar */

    }

    #ascii-container {
        display: flex;
        margin-top: 0; /* Elimina el margen superior excesivo en móviles */
        margin-left: 0px; /* Ajusta el margen izquierdo para centrar */
        margin-right: 0px; /* Ajusta el margen derecho para centrar */
        flex-direction:row; /* Alinea los elementos verticalmente */
        z-index:1000;
    }

    #rain-sketch-container {
        height: 100vh; /* Asegura que el contenedor de lluvia ocupe todo el alto disponible */
    }
}

/* Reglas adicionales para orientación horizontal (landscape) */
@media (max-width: 600px) and (orientation: landscape) {
    body {
        flex-direction: row; /* Organiza los contenedores en fila en lugar de columna */
        overflow-y: hidden;
    }

    #tree-sketch-container, #color-bar-sketch-container {
        width: 48%; /* Asigna un ancho menor para cada contenedor */
        height: auto; /* Ajusta la altura automáticamente */
        margin-top: 5px; /* Ajusta el margen superior */
        margin-bottom: 5px; /* Ajusta el margen inferior */
    }


}

 

</style>

</head>
<body>

<div id="rain-sketch-container"></div>

                  <div id="container" style="position: relative; width: 100%; height: 100%;">

                       <pre id="ascii-luna">
                                                                                                           
                  *****, *##%###%/ .****************************. ,%#%, ,,        /*.  ,/           
                  (#*,   .  ,**,*, ###/ ***********************************,  **..#,  ./%%%%#.              
                   /  #%%%%##%%#/.   .,***********,,,************************,. %###%##%#  ,,*,,*. *@    #  
                  ,,,,,.  %###%#%#..******.  .(#%%%%#%%%#,   ,**,***************. %#/          .*/##%%%%%(  
                  /*  ,***,. .%## *,*,. .(,   ..,**,   ./%%%%%(  ,***************, *#%#%%##%#%%%##%(. ,(    
            ,#%#%%%%%%%%%%%%%%%(.,,,   * %# &% & %/   ,#%%(  (%%%%  ,*************,..%##%#%%%(.     .,*     
               %   /%%#%%##%#%(.**  *.///*/& &% & &% & &, *%#%, #%#%. ,************* ,%#. .,**,*****,       
             .  &(*      .(%#% ,, &/.&&&(...*&&%&#&&.&& &,(* *%%( %%%% ,*************      ..,,  /@         
               ,,*,,,**,*,,,   ,.&&& /&%&#.  /&&&&&&%%& &//&.( /#% ,%%% .,***********,,#%#%%#%%%###%%##(/,. 
                 &    ./###%#., &&&%&, &@.   @ %&&&&%(%%&/%%*#&  ##.*##% ,,********,*, %#%###%##%%(*.  ./@  
         ,  .*(%%####%%#%####.. &&&&&&%/ &,*& &&&&&,%%&&&&&&,&#.# #% ###/.***********, #(,   .,,**,..   (   
                     ..,,*/((/ ,&&&&&&&& &&* (%#,.&&&&&&&&%&&& &,* #*,%## ***********.*#%/.  .*,***,        
                  @. *******.  .&%&%&&&% &&&&&%&&&&&&&&&&&&&#*&(.& (/.%## ,********,* ####%%%%%%#.  .(      
                 .*,*,,.. #%%#( #&&&&%&.&&&&%#.*&&&&%&&&&&&&&%/#&  #,/%%,.,********* *##%%%%%%%%%%#%####/   
                   # .##%#%%###( &&&&&(/%&&  ./%&&&#%%&&&&&&&&&% & % %%# ,*********.*%* .*******,  &@@&&&,  
              // .%%#%#%%%%%%%#(* %&&&&*,%&& (%   ,(&&&&&&&&&#.&&   #%# ,********* (#%##%(  ,*******. ,*    
              &%(*     , .*,*,,..#, &&%&&&%&&%&&*  .&%&&&&&&%&%#.  ##* ,********..%%%%%%%###%      ..,,*.   
                     @ .*,**,. %%##%  &&&%&&&&&&& &%&&&&&&&&&&&.  %( ,,******,.  ..   /%%##%%#%%. ,         
                     .*,.    %##%%%#%#/ ,%&%&&&&& (&&&&&%&%&, * /. *,*****,, (#%%% .,,***,   ,(%%#%/  /     
                         ( %%#%#%#%, ,*..(  #&&%&%# .,  .,*    .,******,.   ,%#%%##%  *****, *  @,  .//     
                       # %%%%%%/  ****.,%#%%%%.    .,*.   .,*,***,,. ,%%##..*,  #####%. *   .,              
                     &.##%%(  @,.,*** /%%##%( *, %#%%%#* . *(#%%%(   %###%% ,*,**  *%###. /                 
                   & ##%  %    .,,** (##%%( .,*, %#%### ,*, %###%*.*, *%%%%%  ,*,*. % .%%%.                 
                   #* //      ,*, , #%%%( & ***, %%%%%  *** /#%%%..***, #%%%# %  ,*.   *  (%. @             
                             . /%@ ##%( @ / *,,,.%%%% # ,*,, %#%%   *,*.  %%#,   *         * ,*             
                                % %## @   .,**. /##%,. /.*, .*#%% @/ **. # /#%..                            
                               ( %( @      *. @.##%*.    , /& %#%   % ,,   / %% /                           
                                % (         #   #%(           *## .          . %.                           
                                              @ %#           @ %#                                           
                                              . % @           .*(                                           
                                                              @ /                                         

                       </pre>
  
   </div>



    <pre id="ascii-sol">
                                                                                                   
                                 *&&&% (#%.#%/(     @.%%(,&%*..../                                  
                                 (#/%%((%%.#%#*@    @.%%*#%%.%%%.@      @#                          
                        @#..&#    @//%%.%%#/%%.@    &,%%.%&((%%.@     @.#**./@@                     
                    %.*%//%%//@%,./&/#%#,%&.%%,@   @(/%#*%%.%%,# ( & %.%%(,%%% %@(                  
                 @ ,#% %%%.#%# /#.&.@.#%*#%*/%*%*.,,,(%*%%,(%((@ %,& /%%.%%%,(%%#.@                 
                 &@,#%%#.%&#,%%.,%.&,%.%% && %#,.,,..%%.&%,%(,(*%.& #%#*%%//%%#.@*                  
                    @//%%(,%&,(%( #%.#&.##,%*#% .,,, %(*%,##.%#,&, %%.%%(,%%(,@.     @/ @           
          @/(# &@     @(,%%(*%%.%#..#&.&#**%%,% ,,,* %,%#*//&,%/#.%#,%%.#%(,@     @( %%%./@%        
       .@(* (%%%(.&@  ..,%.%%**%//%.,%&/&,#.&,# **,*.#.%.%.&#*&.*%.%%.#%/,%    @%.(%%%,*%%%.@       
       & (%%&%*.#%%(.&/,.,,  #%,(%.#((&.&%,(*#* **.**./#/((&(/&*(,&*/%/ .* *.%.(%%#.(&%%/.#(,@.     
     @**%%%(.*%%%%./%%#.(.* **.*%.#(.(&#*&#*,%..**.** %.(,&&.&&*%(*%*.*,.*. /%%*.%%%(.(%%%%*.#@     
      @@%.,#%%%%.,%&%/.#%#  *..**,. #.%&%,&&,.****.**,* #&&.&&(* *.**.**.*%%,*&%( (%%%( /@@         
           @@&,.#%%%,.%%%.*%(.** **** ,(&%  (,#%(%/&(%%*( .#&* .**, ****#.#%# (%%#,.#&&%%#/         
   @@&/  ,/.%#( ,.    .(/.#%(./.**,.**./*%.,./(.((,((,//...%,( *.,*** .%%./%%*.#.#&.#&,  %@&*.,(#*/ 
  & %%#(..,./&&%%%%%#..%&#.((.*%,.*,.#/..#*###############*(../#*,*...%&&&&&&&&&%.#/*. /##%%%%%%/ /@
 @,/,..*#%%%%%##* ,(/.%&%.%&&&%(*,. **.####*..,(#####/...,(###,*/,.%&&*.(%&&&&&&%,,%%%(,.,(#%&&%%& @
 &*#%&&%&%%%%%(*..*/%%%,(&&&(,.**.& ,*(#*.,*/.,#.##/*#.,**../#((. &.(&&%,,(%(,../#%&&%&%#/*...*(##.@
@&*%%%%%%%##(/*,..,*(%&&%#*.*%&#,( ,(#, *%*  &* ,##// ##  %%  ###, (, *#%&(/,..,/(#%%%%%%%%%%#(/**, 
 #((/*,......,,,***/(/*,...,,**.#//((#(,*(*,*/..*(#*/ **../(,.###(*/#.*****,,,...  .*/(&@@@..       
         ..,,,,,............... ,,.*########(###/(#*(##((#((#####*.., ,,,,,************,            
    ....@@@@@@&%/.      ..,****.%(,*(########/*#######*/########(*,(%.*,.  .,/(#%###((//*,... ...,,*
 ./(#%%%%%%%%%%%%#/,. .*(%&%(, , , (#############* *#############(.*./ *..,/%%&%%%#/,. .,*(##%%%%%*#
 @*(*...*(%%%%&%%%(,.,/##(,.(&&&/,&.,(#######.,.     ...########,.&*.%&&&#*...,/##(*..,(%%&%%%%%%%//
 @*%%%&&#*../(%%%%(.#&&&&&#*.,#&&&.,#.,#(##/(###,   .###*###(#*.%, &&&&#*..,,,*#&&/ ,/%%%%%%#(/..,,@
  ( #%%%%%%#*.*#//%.(&&&&&&&&#*.(.**.*#.,(//####*###*(###(//, %,.**, , *#&&%(**(&%,(% %@@%* ,(%%% @ 
  @*/*.,%@%   .%/*&,//.(%#,*%(. ***.,*,,,&*. *( ((,((,(*..*%,,,**,.**,,*,%%*,#%(,,.#%,,##     &@@%  
             /%%* /%%#,*&%,*%.*** *** ,.&&(.../%/&,&*#/,. #&*.#,.***.,*,*%#./%%/.(%%#,  .,          
         /@&.,#%%%,,%&%./%%.,*,,** (.% &&*(&% (.**,*** %&#/&& # %.* *** *, *%%/.%&%( /%%%#,,&@@     
      @(./%%%%*.#&%# #%%, ,* ,* (%.%# %&/#&*(.% **,**...&&(,&&.#,(% %# ,*.,,,,*%%#.(%%%#./%%%.#(    
       @(.*.%%%%,,%%%,*(.,.*. (%,#%.#*(%,&((/#//,*,,*.*(*(&&**&&.( %%.%%.,.*.,.@**%%%( #&%%(/@      
        @*(%%.(%%%*,@@   ,&.#%(*%(*%,.%#/&,#.&.#.*,,*.%.%.(.(&&.&%*(,%%.%%**&    @@*,%%%#,./@       
          @&.#%(.%@     @.#%#.%&.#%./#&.%#*,%%,%.*,,*.%*%%,%.*#& &.%%.%%(,%%(*@@    @@**/(@         
            @,%@     #&.#%%.%%#*%( (%,/%.##*&*## ,,,..%#,%,(% .&.%/*(%#,%%(*%%#.@@                  
                   @&.%%%,#%&.#%/.&.%**,#%.%%.##. *, ((%.%%.%% % &.@%,%%,(%%//%%#.#@                
                  @ #%%(,%&#,%%,#*(%/%#(%#*&%*%#,/../%*%(*%#/%( &.%.,& %%# %&%,(*./@                
                    /@.(&%.#%%.@@./#.%.%% &%*#%#/%   @,%%.%%,#%/#.    @,#%%/*#.%@                   
                       &@#(.#,@     &,%%/(&& %%*#    @.%%/#%% %%,#@    @%. @@                       
                                   @,#%%.%&(*%% &    #*#%%.%&#/%%,&                                 
                                   &##(,*(#,,(% @    /(/#* *,, %&@#    
                                   
                                   
                                </pre>
                            </div>


                            <script>
                                // Crear instancia de Audio para el sol
                                let audioSol = new Audio('ambient.wav');
                                audioSol.loop = true;  // Habilitar reproducción en bucle
                                audioSol.volume = 1.0;  // Establecer el volumen al máximo
                            
                                document.getElementById('ascii-sol').addEventListener('click', function() {
                                    // Comprueba si el audio está reproduciéndose y alterna su reproducción
                                    if (audioSol.paused) {
                                        audioSol.play();  // Comienza a reproducir el audio
                                    } else {
                                        audioSol.pause();
                                        audioSol.currentTime = 0;  // Reinicia el audio si ya estaba reproduciendo
                                    }
                                });
                            </script>
                            
                            <script>
                                // Crear instancia de Audio para la luna
                                let audioLuna = new Audio('1s.mp3');
                                audioLuna.loop = true;  // Habilitar reproducción en bucle
                                audioLuna.volume = 1.0;  // Establecer el volumen al máximo
                            
                                document.getElementById('ascii-luna').addEventListener('click', function() {
                                    // Comprueba si el audio está reproduciéndose y alterna su reproducción
                                    if (audioLuna.paused) {
                                        audioLuna.play();  // Comienza a reproducir el audio
                                    } else {
                                        audioLuna.pause();
                                        audioLuna.currentTime = 0;  // Reinicia el audio si ya estaba reproduciendo
                                    }
                                });
                            </script>
                            


<div id="tree-sketch-container"></div>    

    
 

        
        <div id="color-bar-sketch-container"></div>

        <div id="ascii-container" class="container">

        <pre id="ascii-art">
                ./##/,((/****,,,,,,,*(.,,/*,*,,*(##((*(///*****..,,.,,..,..,......         
                *                                                                         /   
              ,    ,%%%#((((((///////*******////////**,,,..                                 , 
                   ,@                                                                  *&    /
                   ,&                                                                  *&     
                   *&,..,,,,,****/////(((((###%%#&&#&%&&&&%@%@&&@@&&@@@@@@@@@@@@@@@@@@@@%     
                   *&                #%%(      /#,/.((,*(.(,#../(/                     /%     
                   *&                &%&&x xxc .%.,#*#.%,(#(%.,%(%%                      /%     
                   *&                 #,(/**....,,,*//**,#(#%,/*/#,                    /%     
                   *&                   (&//*,*/.*/*#,(.%&.#.**,#/#                    /%     
                   /&         (&//,*#%,     (&%(,/%/*(((((/#%,&#/,.(                   (%     
                   /&        %#(//**/*,/*     #.&..,(,(*(#/..,..../%                   (%     
                   /&   .(.../%(*.#,,#*.       .(.(*#%,#&#//.....*..(                  (%     
                   (&   @*.,,*((&(##/.%###/%%&#/ **(,,(/*%(%*//(/.*,,.*                #%     
                   (%    #,..*(&(/%##(,/((/*&%#....,*(#(/*,%(#(,#.,,,.     (#%,,&/     #%     
                   #&       #&(*##*(./.   ,###(*&#*%%,#&#%(*,**.%,*(#%#((.#&%#,*#/,,   #%     
                   #%      &##/.#%.*&.*..&(/,*/,%(((%,##*#*##%.#**,(( **%,&,#(.#,*/(#* #%     
                   #%    */##*,.(&.,,#,/,((****(,##%,&#*&#*#(,/*******#,,*,&.*,        %%     
                   #%    %.(/.,//#,*,/.,%*******%./###*##(.*/***(..../(**/.,#          %%     
                   #%    #.(,*.%.,(,*,/,%&*%******,*((#(/**(/,***,.,,,.*,.#            %#     
                   %%     **.,(.,,(./,,(%&/#**/#(#****%#***#&/##,((*#,.,,..,#          &#     
                   %%        #/..,../#,/%%/(&(####(,###%&%%%@///%*,&.,,,,,,.,**        &#    ,
                   &%          ,.&/((.*/#&%%&&(##&//(#&#&%###**,**,,,.,,,,,,,,.#       &#    .
                   &%          ,##/.   #(%%%####%(&##&#%###%#*,*,,.,,,.,,/,/##(#&#     &#    .
                   &%                 ,#&&%(#%##%&##&#%#%###%(/,,,,,*(./*.,.,,,&,/*    @#     
                   &#                /&%##%%#(#%###%&####%&#&#*&%/*(%#((.,.,,,**,#     @(    .
                   &#               %(###*%#&&&#(&#%#%%#&#&%(##%(/*%(/(%.,.#&@,.*      @(    .
                   &#             &#((&(%&#.*((@&%#%#&&#@%%%&&%%   *(/%#%.*.,,.(       @(    .
                   &#           &&&%%#%######(#&/(,,(*&@%%###%.       .(**/.,..#       @(    .
                   &(         %##(#%#%#%#####%#%##&%&(.(./(/            ##.,,,.#       @(    .
                   &(       #%%%%&##&#%######%#%#%%&##@#%(#,            ,&.&,.,#       @(    .
                   &(     .%%#%#&(#%########%##%(%%%#&%%%%%%@            #,#,,,*   &(/ @(    .
                   @(    %%##&%(%####%#&#(##%##%(%%##%##%&#%&%.           %&..*@%/(#(  @(    .
                   @(  .&%(##&@@&@@%((//(#%&&&&&%%%#(#####%%%(%           . #/,*#,,#// @(    ,
                   @( ./**/%%&(#%%(/*****#&@#%%&&%(/,......,*#&*              &*,*#.#/ @(    .
                   @(   /*(.@&%#&&&(,.,,,#%#&%#%(%#%#%...#.,..(,             ,#(((.%#  @(    ,
                   @/   .*@*/,,./&&#(*.,.&%%%(#%(&(&##...,*.,,,,            %(#/#/     @(    .
                   @/   *,..,,*..,/.%.,,,.%@#####%(&(#,.,*@,,.,#          .&#%         @/    ,
                   @/   /.,/*%(..*%%*..,**(.%,&###(&##,,/,%(,,..(        ,##%          @/    ,
                   @/   (((,,,..,/%#,,,%,(,.,& ,&##%#&.,**,(.,..(       (((/           @/    ,
                   @/ /*..,.,##(/..,,,/#..#..*  @%###/.(%*%..,.#./     #(#.            &/    *
                   @&/%#.*#,,,..,...,..,%...#   /,.#%.,,,,./&./,.%    &(&              &*    *
                   @/*,*%%*,,&/.(#,..#..,..#    %(.(.*((,,&(..,(.(  .#(%               &*    ,
                   @&@**,,.,......#,....#**      **.......,*(..,.,,*(#/                &*    ,
                   @/.*%&##(#&(/%./&/...,,(            #**(/,...,.&##,                 &*    ,
                   @(//#(//,((%(*#,/...,.*,           .(*#//...,,%(&                   &*    ,
                   @/*.//    %*///,..,./*.,.  .#/* ,,  %/#/*,,.(((%                    &*    ,
                   @/%.*  @. &%,(,..,.# .//*#,/#%*/(%&( @%(,.,%#%.(                    &*    *
                   @* @.##%( @*(.,.,.#   .*/(%,(#*##/(.  %(*(#(%..(   .,.   .@/        &*    ,
                   @* /*&#*#,*(.,,.,&,./(*..,(#*%/..,*//,.*&##*...,*      %.% /,(/*(*  @*    ,
                   @%,(,,*/(#%.,,,/,.(,*#//(##.(.//..,*,.(##&&#(...&  ./#,#.%,#//*(%/%*&,    ,
                   @*./,,,*(#,,,,/,.,,,///%.,,,.(.(/,...%##*,,%/*,,,**//&*/*((/*(#,%,  &,    ,
                   &*,./,%%#**/,(.,,(**#,,......,,*,,.,##%....*%(,..&,.(*.*%#*(%/.,,,,*&,    ,
                 ,,&*,.%##(#&%##%,,*#%&#.,./((.*/.(/.%(#/.....,#(*.,.%..,..,,,/#(/(#.,/&,    ,
                 .,&*,.,.,/#######&/,..,,,((,#,*/%*(%#%......,.(%#%&&##%*.,,,,,*&/ *((*&.    ,
                 .,&*....,...,.%#&###(%,,,,.(%/(%,%##*,,.,,.,,.&#############&.,,(,&*&*&.    ,
                 ,,&,.........,.,,,,,,,,,,,*,,,***,**********************************/#&.    ,
                 *,&,                       %/ %   (  % ,**  &  (                     .&.    ,
                  .&,                                                                 .&.    ,
                                                           .......,,,,****************//.   ,.
              .(                                                                          ,*  
                 ,(%#/,                  ,                                           ,*##,   
               
          
           
             
    </div>


        <pre id="ascii-cat">
 
            @(,                                                 
            %(,*/%&                                               
 @r         **.##/.,,                                              
/,/       /**#.*%*,                                              
/**%./(     //.#../#....                                           
(*/#%(.((/(/../#&&&&%%(*.,,,                                       
/*,%*,%#*./%&&&&&&&@&&@&&/.,                                       
(,*%/..,(%*/&&&&&&&&@&&&(,.,,                                     
,/(,(%#,.#%,(&&&&&&&@&%,(&%*....                                             
 /,##(*,*,*%&&&&@&&&#,.*&&&&&&*..                                 
(*.%&&(%&&&&&&&&&&&&%&&&&&&&&&%..                 (#(..,,,        
(,/%&//%%%&&&&&&&&&&&&&&&&&&&%,..               ,#,/%%%/,..,,     
(,/%&(*#*(%*%&%&&&&&&&&&%(*. ,.,              .#**%%&**%%%(*,...  
(*.%&%.%#*%/(#*&&&&&%&%%%%/,.*               &#.#&&&&&%%,/%%%*,,.,
 /*(&&&&&&&&&&&&&&%*.,*/##,.,              @%*,&&&&&%&/,&%#.%&&%.*
//,,,(&&@&&&&&&&%@&&&&&&&&&,,,           .%%,*%&&&&%,*#%&&&&%%*,*(.
/(*,(%&&/#@&#*%&&%(/&&#%&%&&&%#.,   .,.#%#(/.*&&&&&&(.#&&&&&&#,,*(/   
//,*%&&&&&&&&&&#,#*(#(*%(,%(,,//,/(///(#%%%&&&&&&&&%**%%&@&%*,/,%       
//./&&&&&&&&&&&&&&&%#(*,/./%/,*,%%&&&&&&&&&&&&&&&%(.*%%&&&%,*#,*          
**.(&&&&&&&&&&&&&&&&&&&&&&&&%%%%%/,#%&&&&&&&&%/,*(%&&&&&&%,*.(             
./*,#.#%/#&&&&&&&&&&&&&&&&&&&&&&&&&&&&&%/,,,,,/#&&&&&&&&&&%/,#/               
...%%&% #(*%&((&&#&&&&&@&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&%*,%&                 
,.,&&&&&&(,..##,%&*/%*%&&&&&&&&&&&&%%&&&&&&&&&&&&&%(*,.,,/%&@                   
,.,&&&&&&@&%%%,..%#,((*%#,%%#,&&%,&%#,%%&%&&&&&@&@&%%,,%                        
,.,&&&&&&&&&&&&&&(,,,,(.##.(%%,(%&(.#%%,(%(,(%&&&%/.(&%                         
../%,%&&&&&&&&&&&&&%%%**,.*.,#%*,#%%/....***(.(#%/                             
.,(**/((&#&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&%%%./%                                 
,.,%&(,/,##*%&&&&&&&&&&&&&&&&&&&&&&&&@@&&(.(%#                                  
,.,&&&&#,.*#*/%%,%&//&&%%%&&&&&%&&&@&&&(./%                                     
.,*%&&&&&&#(*,/%.(%(,#%(,%%/*&%/,%&%# (%,                                      
,//%&&&&&&&&&&%/*/,,,.*#(,,*,*/(#*,#%,                                        
.,%,(%.%%&%/%&&&&%&&%&&&&&&%%%(*.#%%                                           
.,&&%.//,%%(,%(/%,##,*%%%/,,*(/*                                               
.,&&&&&%%#/,*,,#,/#,.,,/(/.                                                    
,.,&&&&&%&&&&&&(.*                                                              
,.,&&&&&*/%&(,*//                                                               
,.,&&&&&,/,*/*                                                                  
.,&&&%,AA/                                                                      
.,&#,*(,A                                                                       
vvvvvv
vvvvvv
vvvvvv
vvvvv
vvvv
vvv
vv

</div>

<pre id="ascii-cat">
 
    @(,                                                 
    %(,*/%&                                               
@r         **.##/.,,                                              
/,/       /**#.*%*,                                              
/**%./(     //.#../#....                                           
(*/#%(.((/(/../#&&&&%%(*.,,,                                       
/*,%*,%#*./%&&&&&&&@&&@&&/.,                                       
(,*%/..,(%*/&&&&&&&&@&&&(,.,,                                     
,/(,(%#,.#%,(&&&&&&&@&%,(&%*....                                             
/,##(*,*,*%&&&&@&&&#,.*&&&&&&*..                                 
(*.%&&(%&&&&&&&&&&&&%&&&&&&&&&%..                 (#(..,,,        
(,/%&//%%%&&&&&&&&&&&&&&&&&&&%,..               ,#,/%%%/,..,,     
(,/%&(*#*(%*%&%&&&&&&&&&%(*. ,.,              .#**%%&**%%%(*,...  
(*.%&%.%#*%/(#*&&&&&%&%%%%/,.*               &#.#&&&&&%%,/%%%*,,.,
/*(&&&&&&&&&&&&&&%*.,*/##,.,              @%*,&&&&&%&/,&%#.%&&%.*
//,,,(&&@&&&&&&&%@&&&&&&&&&,,,           .%%,*%&&&&%,*#%&&&&%%*,*(.
/(*,(%&&/#@&#*%&&%(/&&#%&%&&&%#.,   .,.#%#(/.*&&&&&&(.#&&&&&&#,,*(/   
//,*%&&&&&&&&&&#,#*(#(*%(,%(,,//,/(///(#%%%&&&&&&&&%**%%&@&%*,/,%       
//./&&&&&&&&&&&&&&&%#(*,/./%/,*,%%&&&&&&&&&&&&&&&%(.*%%&&&%,*#,*          
**.(&&&&&&&&&&&&&&&&&&&&&&&&%%%%%/,#%&&&&&&&&%/,*(%&&&&&&%,*.(             
./*,#.#%/#&&&&&&&&&&&&&&&&&&&&&&&&&&&&&%/,,,,,/#&&&&&&&&&&%/,#/               
...%%&% #(*%&((&&#&&&&&@&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&%*,%&                 
,.,&&&&&&(,..##,%&*/%*%&&&&&&&&&&&&%%&&&&&&&&&&&&&%(*,.,,/%&@                   
,.,&&&&&&@&%%%,..%#,((*%#,%%#,&&%,&%#,%%&%&&&&&@&@&%%,,%                        
,.,&&&&&&&&&&&&&&(,,,,(.##.(%%,(%&(.#%%,(%(,(%&&&%/.(&%                         
../%,%&&&&&&&&&&&&&%%%**,.*.,#%*,#%%/....***(.(#%/                             
.,(**/((&#&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&%%%./%                                 
,.,%&(,/,##*%&&&&&&&&&&&&&&&&&&&&&&&&@@&&(.(%#                                  
,.,&&&&#,.*#*/%%,%&//&&%%%&&&&&%&&&@&&&(./%                                     
.,*%&&&&&&#(*,/%.(%(,#%(,%%/*&%/,%&%# (%,                                      
,//%&&&&&&&&&&%/*/,,,.*#(,,*,*/(#*,#%,                                        
.,%,(%.%%&%/%&&&&%&&%&&&&&&%%%(*.#%%                                           
.,&&%.//,%%(,%(/%,##,*%%%/,,*(/*                                               
.,&&&&&%%#/,*,,#,/#,.,,/(/.                                                    
,.,&&&&&%&&&&&&(.*                                                              
,.,&&&&&*/%&(,*//                                                               
,.,&&&&&,/,*/*                                                                  
.,&&&%,AA/                                                                      
.,&#,*(,A                                                                       
vvvvvv
vvvvvv
vvvvvv
vvvvv
vvvv
vvv
vv

</div>

<pre id="ascii-cat">
 
    @(,                                                 
    %(,*/%&                                               
@r         **.##/.,,                                              
/,/       /**#.*%*,                                              
/**%./(     //.#../#....                                           
(*/#%(.((/(/../#&&&&%%(*.,,,                                       
/*,%*,%#*./%&&&&&&&@&&@&&/.,                                       
(,*%/..,(%*/&&&&&&&&@&&&(,.,,                                     
,/(,(%#,.#%,(&&&&&&&@&%,(&%*....                                             
/,##(*,*,*%&&&&@&&&#,.*&&&&&&*..                                 
(*.%&&(%&&&&&&&&&&&&%&&&&&&&&&%..                 (#(..,,,        
(,/%&//%%%&&&&&&&&&&&&&&&&&&&%,..               ,#,/%%%/,..,,     
(,/%&(*#*(%*%&%&&&&&&&&&%(*. ,.,              .#**%%&**%%%(*,...  
(*.%&%.%#*%/(#*&&&&&%&%%%%/,.*               &#.#&&&&&%%,/%%%*,,.,
/*(&&&&&&&&&&&&&&%*.,*/##,.,              @%*,&&&&&%&/,&%#.%&&%.*
//,,,(&&@&&&&&&&%@&&&&&&&&&,,,           .%%,*%&&&&%,*#%&&&&%%*,*(.
/(*,(%&&/#@&#*%&&%(/&&#%&%&&&%#.,   .,.#%#(/.*&&&&&&(.#&&&&&&#,,*(/   
//,*%&&&&&&&&&&#,#*(#(*%(,%(,,//,/(///(#%%%&&&&&&&&%**%%&@&%*,/,%       
//./&&&&&&&&&&&&&&&%#(*,/./%/,*,%%&&&&&&&&&&&&&&&%(.*%%&&&%,*#,*          
**.(&&&&&&&&&&&&&&&&&&&&&&&&%%%%%/,#%&&&&&&&&%/,*(%&&&&&&%,*.(             
./*,#.#%/#&&&&&&&&&&&&&&&&&&&&&&&&&&&&&%/,,,,,/#&&&&&&&&&&%/,#/               
...%%&% #(*%&((&&#&&&&&@&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&%*,%&                 
,.,&&&&&&(,..##,%&*/%*%&&&&&&&&&&&&%%&&&&&&&&&&&&&%(*,.,,/%&@                   
,.,&&&&&&@&%%%,..%#,((*%#,%%#,&&%,&%#,%%&%&&&&&@&@&%%,,%                        
,.,&&&&&&&&&&&&&&(,,,,(.##.(%%,(%&(.#%%,(%(,(%&&&%/.(&%                         
../%,%&&&&&&&&&&&&&%%%**,.*.,#%*,#%%/....***(.(#%/                             
.,(**/((&#&&&&&&&&&&&&&&&&&&&&&&&&&&&&&&%%%./%                                 
,.,%&(,/,##*%&&&&&&&&&&&&&&&&&&&&&&&&@@&&(.(%#                                  
,.,&&&&#,.*#*/%%,%&//&&%%%&&&&&%&&&@&&&(./%                                     
.,*%&&&&&&#(*,/%.(%(,#%(,%%/*&%/,%&%# (%,                                      
,//%&&&&&&&&&&%/*/,,,.*#(,,*,*/(#*,#%,                                        
.,%,(%.%%&%/%&&&&%&&%&&&&&&%%%(*.#%%                                           
.,&&%.//,%%(,%(/%,##,*%%%/,,*(/*                                               
.,&&&&&%%#/,*,,#,/#,.,,/(/.                                                    
,.,&&&&&%&&&&&&(.*                                                              
,.,&&&&&*/%&(,*//                                                               
,.,&&&&&,/,*/*                                                                  
.,&&&%,AA/                                                                      
.,&#,*(,A                                                                       
vvvvvv
vvvvvv
vvvvvv
vvvvv
vvvv
vvv
vv


hbggvh
v
<script>
    
        let oscilador;
        let gainNode;
        let compressor;

        let whiteNoiseSource;
        let whiteNoiseGain;
        let shuffleInterval = null;
        let currentIntervalId = null;
let currentIntervalSpeed = 50; // Velocidad inicial del intervalo en milisegundos


function startAudioContext() {
            if (!audioCtx) {
                audioCtx = new (window.AudioContext || window.webkitAudioContext)();
                oscilador = audioCtx.createOscillator();
                gainNode = audioCtx.createGain();

                gainNode.connect(audioCtx.destination);
                oscilador.connect(gainNode);
                oscilador.start();
            }
        }

        function solicitarPermisoMicrofono() {
            // Solicitar acceso al micrófono
            navigator.mediaDevices.getUserMedia({ audio: true }).then(function(stream) {
                // Permiso concedido
                // ...
            }).catch(function(error) {
                // Permiso denegado o error
                // ...
            });
        }

        // Esta función inicia el AudioContext y solicita permisos después de la interacción del usuario
        function iniciarInteraccionUsuario() {
            iniciarAudio();
            solicitarPermisoMicrofono();
            // Eliminar el listener para no volver a solicitar permisos
            document.removeEventListener('touchend', iniciarInteraccionUsuario);
        }

        // Muestra un alerta y luego espera una interacción del usuario para iniciar todo
        window.onload = function() {
            alert('Toca la pantalla para activar el sonido y los permisos.');
            // Añade un listener al documento que esperará que el usuario toque la pantalla
            document.addEventListener('touchend', iniciarInteraccionUsuario);
        };


        function toggleIntervalSpeed() {
    if (currentIntervalId !== null) {
        clearInterval(currentIntervalId); // Detiene el intervalo actual
    }

    // Cambia la velocidad del intervalo
    currentIntervalSpeed = currentIntervalSpeed === 50 ? 550 : 50;

    // Reinicia el intervalo con la nueva velocidad
    currentIntervalId = setInterval(shuffleAsciiArtAndSound, currentIntervalSpeed);
}




    function shuffleAsciiArtAndSound() {
        
        
        let newText = '';
        const characters = ['@', '#', '$', '%', '&', '*', '-', '+', '=', '?', ';', ':', ',', '.'];


        
        for (let char of asciiArtElement.innerText) {
            if (characters.includes(char)) {
                let randomChar = characters[Math.floor(Math.random() * characters.length)];
                newText += randomChar;
            } else {
                newText += char;

                
            }
        }


        
        asciiArtElement.innerText = newText;
        oscilador.frequency.value = Math.random() * (100 - 2200) + 100;
    }

   



    document.body.addEventListener('click', function() {
    if (!audioCtx) {
        startAudioContext();
        // Establece el intervalo para mezclar los caracteres del arte ASCII principal
        if (currentIntervalId === null) {
            currentIntervalId = setInterval(shuffleAsciiArtAndSound, currentIntervalSpeed);
        shuffleAsciiCat(); // Cambia los caracteres del gato ASCII inmediatamente
        setInterval(shuffleAsciiCat, 10); // Continúa cambiando los caracteres del gato ASCII
    }}
});



document.body.addEventListener('dblclick', function() {
    toggleIntervalSpeed();
    // Aquí puedes agregar cualquier otra lógica que necesites ejecutar en un doble clic
});

const asciiArtElement = document.getElementById('ascii-art' );

// Nuevo manejador de eventos para el movimiento del mouse
document.getElementById('ascii-art').addEventListener('mousemove', function(event) {
    if (!audioCtx) return; // Asegúrate de que el contexto de audio esté inicializado

    const frequency = (event.offsetX / this.offsetWidth) * (2200 - 100) + 100;
    oscilador.frequency.value = frequency; // Ajusta la frecuencia según la posición del mouse


 const gainValue = 0.3 - (event.offsetY / this.offsetHeight);
 gainNode.gain.value = gainValue;
});







let osciladoresActivos = [];

 
        let prevMouseX = 0;
        let prevMouseY = 0;
        let mouseMoving = false;
        
        function setup() {
            let asciiArtContainer = document.getElementById('ascii-container'); 
            let desiredHeight = 350; // Establecer el largo deseado aquí
            let canvas = createCanvas(asciiArtContainer.offsetWidth, desiredHeight);

  
         canvas.position(asciiArtContainer.offsetLeft, asciiArtContainer.offsetTop);
         textSize(22);
            fill(255);
            noStroke();
    background(0); 
 }
 function windowResized() {
    let asciiArtContainer = document.getElementById('ascii-container');
    let desiredHeight = 350; // Asegúrate de usar el mismo largo deseado que antes
    resizeCanvas(asciiArtContainer.offsetWidth, desiredHeight);
    canvas.position(asciiArtContainer.offsetLeft, asciiArtContainer.offsetTop);
}


        function draw() {
            // Verificar si el mouse se ha movido
            if (mouseX !== prevMouseX || mouseY !== prevMouseY) {
                mouseMoving = true;
                // Generar y mostrar un carácter aleatorio en la posición del mouse
                let char = generarCaracterAleatorio();
                text(char, mouseX, mouseY);
        
                // Aquí iría el código para reproducir el sonido
                // reproducirSonido();
                
                prevMouseX = mouseX;
                prevMouseY = mouseY;
            } else {
                if (mouseMoving) {
                    // El mouse se detuvo; limpiar el canvas y detener el sonido
                    background(0);
                    // detenerSonido();
                    mouseMoving = false;
                }
            }
        }
        
        function generarCaracterAleatorio() {
            // Generar un número aleatorio y convertirlo a un carácter ASCII
            return String.fromCharCode(int(random(65, 190))); // Letras mayúsculas A-Z
        }
        
        // Funciones para manejar el audio
        // Deberás reemplazar estas funciones con tu propia lógica de audio
        function reproducirSonido() {
            // Inicia el sonido
        }
        
        function detenerSonido() {
            // Detiene el sonido
        }



function reproducirSonido(frecuencia) {
    if (!audioCtx) return;



    let oscilador = audioCtx.createOscillator();
    oscilador.frequency.value = frecuencia;
    oscilador.type = 'sine';
    oscilador.connect(gainNode);
    oscilador.start();
}


function inicializarAudio() {
    if (!audioCtx) {
        audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        gainNode = audioCtx.createGain();
        compressor = audioCtx.createDynamicsCompressor();

        compressor.threshold.setValueAtTime(-50, audioCtx.currentTime);
        compressor.knee.setValueAtTime(40, audioCtx.currentTime); // Hace la transición más suave
        compressor.ratio.setValueAtTime(12, audioCtx.currentTime);
        compressor.attack.setValueAtTime(0, audioCtx.currentTime);
        compressor.release.setValueAtTime(0.25, audioCtx.currentTime);
        gainNode.gain.value = 0.3;
 // Volumen inicial ajustable.
 gainNode.connect(compressor);
        compressor.connect(audioCtx.destination);    }
}

document.body.addEventListener('mousemove', function(e) {
    if (!audioCtx) return; // Asegúrate de que el contexto de audio está inicializado

    // Mapea la posición X del mouse a una frecuencia (por ejemplo, de 20 a 2000 Hz)
    let frecuencia = map(e.clientX, 0, window.innerWidth, 20, 100);

    // Mapea la posición Y del mouse a una duración de nota (por ejemplo, de 0.1 a 1 segundo)
    let duracionNota = map(e.clientY, 0, window.innerHeight, 0.1, 1);

    // Ajusta la frecuencia del oscilador
    if (osciladoresActivos.length > 0) {
        osciladoresActivos.forEach(osc => {
            osc.frequency.setValueAtTime(frecuencia, audioCtx.currentTime);

            
        });
    }

    // Detener los osciladores anteriores para evitar superposición y crear uno nuevo
    osciladoresActivos.forEach(osc => osc.stop());
    osciladoresActivos = [];

    // Crea un nuevo oscilador para la nueva frecuencia
    let oscilador = audioCtx.createOscillator();
    oscilador.frequency.value = frecuencia;
    oscilador.type = 'sine';
    oscilador.connect(gainNode);
    oscilador.start();
    oscilador.stop(audioCtx.currentTime + duracionNota);

    osciladoresActivos.push(oscilador);
});



function map(value, in_min, in_max, out_min, out_max) {
    return (value - in_min) * (out_max - out_min) / (in_max - in_min) + out_min;
} 

// Supongamos que tienes un elemento con id 'ascii-sol' como este:
// <pre id="ascii-sol">Aquí va tu arte ASCII del sol</pre>

// Variable para almacenar el ID del intervalo para poder detenerlo más tarde si es necesario
let shuffleIntervalId = null;

document.body.addEventListener('click', function() {
    // Comprueba si el intervalo ya está establecido
    if (!shuffleIntervalId) {
        shuffleIntervalId = setInterval(function() {
            shuffleAscii(document.getElementById('ascii-sol'));
            shuffleAscii(document.getElementById('ascii-luna'));
            shuffleAscii(document.getElementById('ascii-cat'));

        }, 30); // Cambia los caracteres cada 100 milisegundos
    }
});





function shuffleAscii(element) {
    let newText = '';
    const characters = ['@', '#', '$', '%', '&', '*', '-', '+', '=', '?', ';', ':', ',', '.'];

    for (let char of element.innerText) {
        if (characters.includes(char)) {
            let randomChar = characters[Math.floor(Math.random() * characters.length)];
            newText += randomChar;
        } else {
            newText += char;
        }
    }

    element.innerText = newText;
}



function generarRuidoBlanco(duracion = 1) {
    if (whiteNoiseSource) {
        whiteNoiseSource.disconnect();
        myp5.noLoop(); // Detener la lluvia visual
        moverYMostrarGatoAscii(false); // Ocultar el gato ASCII
    }

    const bufferSize = audioCtx.sampleRate * duracion;
    const buffer = audioCtx.createBuffer(1, bufferSize, audioCtx.sampleRate);
    const data = buffer.getChannelData(0);

    for (let i = 0; i < bufferSize; i++) {
        data[i] = Math.random() * 2 - 1; // Generate white noise
    }

    whiteNoiseSource = audioCtx.createBufferSource();
    whiteNoiseSource.buffer = buffer;
    whiteNoiseSource.connect(audioCtx.destination);
    whiteNoiseSource.start();
    whiteNoiseSource.stop(audioCtx.currentTime + duracion);

    myp5.loop(); // Iniciar la lluvia visual
    moverYMostrarGatoAscii(true); // Mostrar el gato ASCII en una posición aleatoria
}

function generarRuidoBlanco(duracion = 1) {
    if (whiteNoiseSource) {
        whiteNoiseSource.disconnect();
        whiteNoiseSource = null;
        myp5.noLoop(); // Detener la lluvia visual
        moverYMostrarGatoAscii(false); // Ocultar el gato ASCII
    } else {
        const bufferSize = audioCtx.sampleRate * duracion;
        const buffer = audioCtx.createBuffer(1, bufferSize, audioCtx.sampleRate);
        const data = buffer.getChannelData(0);

        for (let i = 0; i < bufferSize; i++) {
            data[i] = Math.random() * 2 - 1; // Generate white noise
        }

        whiteNoiseSource = audioCtx.createBufferSource();
        whiteNoiseSource.buffer = buffer;
        whiteNoiseSource.connect(audioCtx.destination);
        whiteNoiseSource.start();
        whiteNoiseSource.stop(audioCtx.currentTime + duracion);

        myp5.loop(); // Iniciar la lluvia visual
        moverYMostrarGatoAscii(true); // Mostrar el gato ASCII en una posición aleatoria
    }
}

// Función para manejar la visibilidad y posición del gato ASCII
function moverYMostrarGatoAscii(mostrar) {
    const asciiCatElement = document.getElementById('ascii-cat');
    if (mostrar) {
        const newX = Math.random() * (window.innerWidth - asciiCatElement.offsetWidth);
        const newY = Math.random() * (window.innerHeight - asciiCatElement.offsetHeight);
        asciiCatElement.style.left = `${newX}px`;
        asciiCatElement.style.top = `${newY}px`;
        asciiCatElement.style.display = 'block';
    } else {
        asciiCatElement.style.display = 'none';
    }
}

// Eventos de teclado para activar/desactivar el ruido blanco y la lluvia visual
document.addEventListener('keydown', function(e) {
    if (e.code === 'Space') {
        generarRuidoBlanco(0.5); // Genera ruido blanco por 0.5 segundos y activa la lluvia
    }
});



// Evento de clic en el elemento del gato para activar las mismas acciones
document.getElementById('ascii-cat').addEventListener('click', function() {
    generarRuidoBlanco(0.5); // Usar la misma duración de ruido blanco
});





function startAudioContext() {
    if (!audioCtx) {
        audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        oscilador = audioCtx.createOscillator();
        gainNode = audioCtx.createGain();

        // Crear delay y configurar
        const delay = audioCtx.createDelay(1.0);
        const delayGain = audioCtx.createGain();
        delay.delayTime.value = 0.1; // Tiempo de delay inicial
        delayGain.gain.value = 0.5;  // Ganancia del delay para controlar la intensidad del eco

        delay.connect(delayGain);
        delayGain.connect(delay);
        delayGain.connect(audioCtx.destination); // Enviar eco al destino

        // Conectar el oscilador a gainNode y al delay
        oscilador.connect(gainNode);
        gainNode.connect(audioCtx.destination);
        gainNode.connect(delay); // También enviamos el sonido al delay

        oscilador.start();
    }
}








</script>

<script>
    // Instancia de p5 para el árbol
    let sketch2 = function(p) {
  let asciiCat = `
  
         
  ☁☁ ☁ 
  

  `;

  p.setup = function() {
    p.createCanvas(710, 200);
    p.textSize(32);
    p.fill(255);
    x = p.random(p.width - 100); // Coordenada inicial x
        y = p.random(p.height - 100); // Coordenada inicial y
    };

  p.draw = function() {
    p.background(0);

    let x = p.random(p.width - 100); // Asegura espacio para el gato
    let y = p.random(p.height - 350); // Asegura espacio para el gato

    // Dibuja el gato en el canvas en la posición aleatoria
    p.text(asciiCat, x, y,x);

  };

  p.mouseClicked = function() {
    p.clear(); // Limpia el canvas
    p.draw(); // Dibuja un nuevo gato
  };
};

new p5(sketch2, 'tree-sketch-container');
    </script>

<script>
    // Define la nueva instancia de p5.js para el sketch de las barras de color
    new p5(function(p) {
  const barSize = 50; // Tamaño de cada "barra" cuadrada
  let lastBarIndex = -1; // Último índice de la barra dibujada

  p.setup = function() {
    let canvas = p.createCanvas(90, 200); // Dimensiones del canvas
    canvas.parent('color-bar-sketch-container'); // Asigna el contenedor
    canvas.style('opacity', '0.2'); // Establece la opacidad del canvas

    p.colorMode(p.HSB, p.width, p.width, p.width); // Modo de color HSB basado en el ancho
    p.noStroke();
    p.background(0);
  };

  p.draw = function() {
    let mouseXAdjusted = p.mouseX - (p.width / 2); // Ajusta mouseX para que el centro sea 0
    let mouseYAdjusted = p.mouseY - (p.height / 2); // Ajusta mouseY para que el centro sea 0
    // Calcula la "barra" basada en la distancia más corta al eje X o Y desde el centro
    let whichBarIndex = p.int(p.min(p.abs(mouseXAdjusted), p.abs(mouseYAdjusted)) / barSize);
    
    if (whichBarIndex !== lastBarIndex) {
      // Calcula la posición inicial de la barra cuadrada
      let startX = (p.width / 2) - whichBarIndex * barSize;
      let startY = (p.height / 2) - whichBarIndex * barSize;

      for (let i = 0; i <= whichBarIndex; i++) {
        // Dibuja cada "barra" cuadrada a lo largo de la diagonal
        let x = startX + i * barSize;
        let y = startY + i * barSize;
        
        p.fill(p.mouseX, p.width, p.width); // Color basado en la posición del ratón
        p.rect(x, y, barSize, barSize); // Dibuja el rectángulo
      }
      lastBarIndex = whichBarIndex;
    }
  };

}, 'color-bar-sketch-container'); // Asegúrate de que este ID coincida con el del contenedor

    </script>
    
    
   <script>
new p5(function(p) {
    const barHeight = 20; // La altura de cada barra será de 20
    let lastBar = -1; // Última barra actualizada
  
    p.setup = function() {
      let canvas = p.createCanvas(220, 200);
      canvas.parent('color-bar-sketch-container');
      canvas.style('opacity', '0.5');
  
      p.colorMode(p.HSB, p.width, p.width, p.width);
      p.noStroke();
      p.background(0);
    };
  
    p.draw = function() {
      let whichBar = p.int(p.mouseY / barHeight);
      if (whichBar !== lastBar) {
        let barY = whichBar * barHeight;
        p.fill(p.mouseX, p.width, p.width);
        p.rect(0, barY, p.width, barHeight);
        lastBar = whichBar;
      }
  
      // Glitch effect
      if (p.random() < 0.2) { // 10% chance of glitch effect
        applyGlitch(p);
      }
    };
  
    function applyGlitch(p) {
      // Escoge un número aleatorio de barras para aplicar el glitch
      const glitchBars = p.int(p.random(1, 7));
      for (let i = 0; i < glitchBars; i++) {
        const glitchY = p.int(p.random(p.height / barHeight)) * barHeight;
        const glitchHeight = p.random(barHeight / 4, barHeight * 5);
        const glitchWidth = p.random(p.width * 0.1, p.width);
        const glitchX = p.random(p.width - glitchWidth);
        const r = p.random(255);
        const g = p.random(255);
        const b = p.random(255);
  
        p.fill(r, g, b);
        p.rect(glitchX, glitchY, glitchWidth, glitchHeight);
      }
    }
  
  }, 'color-bar-sketch-container');
  
</script>

<script>
   document.addEventListener('keydown', function(event) {
    if (!audioCtx) startAudioContext(); // Inicia el contexto de audio si aún no está activo

    switch(event.key) {
        case 's':
        case 'S':
            // Alternar audio del sol
            togglePlay('ascii-sol', 'ambient.wav');
            break;
        case 'l':
        case 'L':
            // Alternar audio de la luna
            togglePlay('ascii-luna','0S.wav');
            break;
        case ' ':
            // Mostrar/ocultar el gato ASCII y gestionar ruido blanco
            toggleAsciiCatAndWhiteNoise();
            event.preventDefault(); // Evitar que la barra espaciadora haga scroll
            break;
        case 'ArrowUp':
        case 'ArrowDown':
        case 'ArrowLeft':
        case 'ArrowRight':
            // Manejar el movimiento del cursor con flechas
            handleArrowKeys(event.key);
            break;
    }
});

function togglePlay(elementId, audioFile) {
    let element = document.getElementById(elementId);
    if (!element.audio) {
        element.audio = new Audio(audioFile);
        element.audio.loop = true;
        element.audio.play();
    } else {
        if (element.audio.paused) {
            element.audio.play();
        } else {
            element.audio.pause();
            element.audio.currentTime = 0;
        }
    }
}

function toggleAsciiCatAndWhiteNoise() {
    const asciiCatElement = document.getElementById('ascii-cat');
    let display = asciiCatElement.style.display;
    asciiCatElement.style.display = (display === 'none' || display === '') ? 'block' : 'none';


}



function handleArrowKeys(arrowKey) {
    console.log(`Arrow key pressed: ${arrowKey}`);
    // Aquí puedes agregar lógica para mover un cursor o cualquier otro elemento en pantalla
}



    
    </script>
    <script>
        // Asegurándose de que el sketch de lluvia no se detenga al presionar la barra espaciadora
      
    
        // Sketch de lluvia p5.js
        let rainSketch = function(p) {
            let raindrops = [];
    
            p.setup = function() {
                p.createCanvas(p.windowWidth, p.windowHeight);
                p.frameRate(100);
            };
    
            p.draw = function() {
                p.clear();
                for (let i = raindrops.length - 1; i >= 0; i--) {
                    raindrops[i].update();
                    raindrops[i].display();
                    if (raindrops[i].isOffScreen()) {
                        raindrops.splice(i, 1);
                    }
                }
    
                if (p.frameCount % 2 === 0) {
                    raindrops.push(new Raindrop(p));
                }
            };
    
            class Raindrop {
                constructor(p) {
                    this.p = p;
                    this.x = p.random(p.width);
                    this.y = 0;
                    this.z = p.random(0, 20);
                    this.len = p.map(this.z, 0, 20, 10, 20);
                    this.yspeed = p.map(this.z, 0, 20, 4, 10);
                }
    
                update() {
                    this.y += this.yspeed;
                    let grav = p.map(this.z, 0, 20, 0.01, 0.2);
                    this.yspeed += grav;
                }
    
                display() {
                    p.stroke(138, 43, 300);
                    p.line(this.x, this.y, this.x, this.y + this.len);
                }
    
                isOffScreen() {
                    return this.y > this.p.height;
                }
            }
        };
    
        new p5(rainSketch, 'rain-sketch-container');
    </script>
</body>
</html>


