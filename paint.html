<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="description" content="Alfonso Pretelt - Arte y Psique - Collage">
    <meta name="keywords" content="collage, alfonsopretelt,tarot,erosion,">
    <meta name="author" content="alfonsopretelt">
    <meta name="robots" content="collage">
    <meta name="google" content="translate">
   <meta property="og:type" content="www.arteypsique.com">
    <meta property="og:url" content="https://www.arteypsique.com">
    <meta property="og:title" content="Arte & Psique">
    <meta property="og:description" content="Plataforma de aprendizaje y creación">
    <link rel="icon" href="rostro.jpg" type="image/x-icon">
    <meta property="og:image" content="log.png">
    <title>ART & PSYCHE</title>
    <script src="https://cdn.jsdelivr.net/npm/interactjs@1.10.11/dist/interact.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/RecordRTC/5.6.1/RecordRTC.min.js"></script>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
       <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Anta&family=Kode+Mono:wght@400..700&display=swap" rel="stylesheet">
<link href="https://cdn.jsdelivr.net/npm/boxicons@2.0.7/css/boxicons.min.css" rel="stylesheet">

<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth.js"></script>
<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-app.js";
    import { getAuth, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.6.10/firebase-auth.js";

    // Configuración de Firebase
    const firebaseConfig = {
        apiKey: "AIzaSyARA9tqBfkiFK80XcaWtS1ar6yglfmEh3g",
authDomain: "artepsique-9ced7.firebaseapp.com",
projectId: "artepsique-9ced7",
storageBucket: "artepsique-9ced7.appspot.com",
messagingSenderId: "269569252943",
appId: "1:269569252943:web:b185a96dee1ff30ab2d43a"
    };
    document.addEventListener('DOMContentLoaded', () => {

    // Inicializa Firebase
    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

        onAuthStateChanged(auth, user => {
if (user) {
    // Si el usuario está autenticado, muestra el contenido de la página
    document.body.style.display = "block";
    // Aquí puedes incluir más lógica, como cargar datos del usuario, etc.
} else {
    // Si el usuario no está autenticado, redirige a la página de login
    window.location.href = 'index.html';
}
});
   
  

        
  document.addEventListener('contextmenu', function(e) {
    e.preventDefault();
    alert('El clic derecho está desactivado en esta página.');
  }, false);

 



onAuthStateChanged(auth, user => {
document.getElementById('loading').style.display = 'none';
if (user) {
document.body.style.display = "block";
} else {
window.location.href = 'index.html';
}
});



    const logoutButton = document.getElementById('logout-btn');

    logoutButton.addEventListener('click', () => {
        const auth = getAuth();
        signOut(auth).then(() => {
            // Cierre de sesión exitoso
            console.log('Usuario ha cerrado sesión');
            window.location.href = 'https://arteypsique.com'; // Redirecciona a la página de inicio de sesión o a donde prefieras
        }).catch((error) => {
            // Ha ocurrido un error
            console.error('Error al cerrar sesión', error);
        });
    });
});

  
</script>

    <style>
    
       
       /* Estilos base para móviles */
body {
    font-family: "Anta", sans-serif;
    margin: 10px;
    background-color: #f2f2f2;
    background-position: center;
    width: 100vh;

  
}


/* Ajustes para dispositivos pequeños (menos de 768px) */
@media (max-width: 768px) {
    #text-container {
        padding: 20px;
        font-size: 14px; /* Aumenta la legibilidad */
    }
    
    .navbar-toggler {
        margin: 0 auto; /* Centra el botón del menú */
    }

    .navbar-nav {
        text-align: center;
    }

    footer {
        padding: 10px 20px; /* Ajuste de padding para el footer */
        font-size: 14px; /* Tamaño de texto adecuado para lectura */
    }
}

/* Ajustes para tabletas (entre 768px y 1024px) */
@media (min-width: 768px) and (max-width: 1024px) {
    #text-container {
        max-width: 90%; /* Ajusta el ancho máximo para aprovechar mejor el espacio */
    }
}

/* Estilos adicionales para mejorar la accesibilidad y la interacción */
.nav-link, .navbar-brand, footer a {
    touch-action: manipulation; /* Mejora la respuesta táctil en dispositivos móviles */
}

.hover-word:hover, .word-hover:hover, #menu-links a:hover, #logout-btn:hover, footer a:hover {
    color: #3bc0ac; /* Cambia el color al hacer hover para mejorar la interactividad */
}

             .anta-regular {
  font-family: "Anta", sans-serif;
  font-weight: 400;
  font-style: normal;
}

     

#header {
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100%;
    left: 0;
    z-index: 1050; /* Eleva el z-index para que esté sobre otros elementos */
    position: fixed;


}


#navbar {
    display: flex; /* Usa Flexbox para el diseño */
    justify-content: center; /* Centra los elementos horizontalmente */
    align-items: center; /* Centra los elementos verticalmente */
    color: #fbfbfb !important; /* Color de texto blanco */
    border: 2px dashed #5d626b; /* Borde personalizado */
    margin-right: auto; /* Centra el navbar ajustando automáticamente el margen derecho */
    margin-left: auto;
    position: fixed;
    background-color:  transparent;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);



}



#navbar-brand {
    display: flex; /* Usa Flexbox para el diseño */
    justify-content: center; /* Centra los elementos horizontalmente */
    align-items: center; 
    font-size: 1.1rem; /* Tamaño de la fuente */
    margin-top: 2px;
    padding: 8px;
    background-color:  transparent;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);


}

        
        #navbar.navbar-expand-lg.navbar-light.bg-light {
padding: 5px;
            display: flex;
            justify-content: center; /* Centra los elementos horizontalmente */
    align-items: center; 
    background-color: transparent; 
    border: 2px dashed #c4d49c;
    z-index: 1050; /* Eleva el z-index para que esté sobre otros elementos */
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);


}
        .navbar-nav .nav-link {
            font-size: 1rem; 
            color: #3bc0ac; 
            transition: color 0.3s; 
            margin: 0 15px; 
        }

        .navbar-nav .nav-link:hover {
            color: #55d1ba; 
            border: 2px dashed  #c4d49c

        }
       

@media (max-width: 768px) {
    .navbar {
        justify-content: center;
        align-items: center;
        text-align: center; /* Asegura que el texto también esté centrado */
        background-color: transparent; 

    }

    .navbar-brand {
        width: 100%; /* Ocupa todo el ancho disponible para asegurar el centrado */
        display: block; /* Trata el elemento como un bloque para mejor manejo del centrado */
        background-color: transparent; 
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);


    }

    /* Asegúrate de que todos los elementos del navbar estén centrados en dispositivos móviles */
    .navbar-nav,
    .navbar-toggler {
        justify-content: center;
        width: 100%; /* Ocupa todo el ancho para elementos internos también */

    }
}
/* Para asegurar que el navbar se expanda adecuadamente en dispositivos grandes */
@media (min-width: 992px) {
    .navbar {
        justify-content: center; /* Mantiene el contenido centrado en dispositivos grandes */
        z-index: 1;
    }
}

        .navbar-toggler {
            border: 2px dashed  #c4d49c
        }

        .navbar-toggler-icon {
            background-color: transparent; 
            border: 2px dashed  #c4d49c

        }

        .navbar-toggler:focus {
            outline: none; 
        }

          .navbar-collapse {
            background-color: transparent;

            border: 2px dashed  #c4d49c

        }

        .navbar-collapse .navbar-nav .nav-link {
            padding: 15px 0; 
        }

        .navbar-collapse .navbar-nav .nav-link:last-child {
            border-bottom: none; 
        }

        
        @media screen and (max-width: 576px) {
    .navbar-nav {
        font-size: 0.9rem;
        margin: 10px 15px;
        width: 80%; /* Hace que la barra de menú use todo el ancho disponible */
        text-align: center; /* Centra el texto de los enlaces */
align-items: center;
background-color:  transparent;

    }

    .navbar {
        width: 80%; /* Asegura que el elemento navbar también ocupe todo el ancho */
        text-align: center; /* Centra el texto de los enlaces */
        background-color:  transparent;

        
    }

    .navbar-collapse {
        width: 80%; /* Hace que el contenido colapsable de la navbar ocupe todo el ancho */
        text-align: center; /* Centra el texto de los enlaces */
        background-color:  transparent;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);


    }

    .navbar-toggler {
        margin-right: 0; /* Elimina el margen derecho para alinear el toggler a la derecha */
        text-align: center; /* Centra el texto de los enlaces */
;

    }

    .navbar-nav .nav-link {
        text-align: center; /* Centra el texto de los enlaces */
    }
}



        #menu-links a {
            color: #767676; 
            text-decoration: none;
            margin: 0 20px; 
            background-color:  transparent;

        }

        #menu-links a:hover {
         border: 2px dashed  #c4d49c      
          }

        #header img {
            width: 75px;
            height: auto;
            margin-right: 10px;
        }

        img[src="Capa%2031@3x.png"] {
            display: none;
        }

        .section {
            padding: 20px; 
            text-align: center;
        }

        /* Estilos para la barra de menú */
.navbar {
    background-color: transparent !important; /* Hace la barra de menú transparente */
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); /* Agrega una sombra suave */
}

/* Estilos para el menú desplegable en versión móvil */
.navbar-collapse {
    background-color: rgba(255, 255, 255, 0.8); /* Semi-transparente con sombra */
    box-shadow: 0 8px 10px rgba(0, 0, 0, 0.2); /* Sombra más notoria */
}

/* Ajusta la transparencia del botón del menú desplegable para mejor coherencia visual */
.navbar-toggler {
    background-color: rgba(255, 255, 255, 0.5); /* Semi-transparente */
    border-color: rgba(255, 255, 255, 0.5); /* Ajusta el color del borde del botón */
}
.navbar-toggler-icon {
    background-image: url("data:image/svg+xml,..."); /* Asegúrate de usar tu propia imagen SVG aquí */
}


        #text-container {
    max-width: 800px; /* Ancho máximo para pantallas grandes */
    margin: auto; /* Centra el contenedor */
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    padding: 30px;
    background-color: rgb(249, 249, 249);
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    border-radius: 10px;
    font-size: 80%;
}

/* Ajustes para dispositivos móviles */
@media (max-width: 768px) {
    #text-container {
        max-width: 90%; /* Ajusta el ancho máximo para pantallas pequeñas */
        padding: 15px; /* Reduce el padding para más espacio */
        font-size: 16px; /* Ajusta el tamaño de la fuente para mejor legibilidad */
    }
}





#logout-btn{
    color: gray;
    background-color: #fff;
    border: none;

}
#logout-btn:hover{
    border: 2px dashed  #c4d49c
}





     
        .gallery-container img:hover {
            border-color: #ffd53d;
        }

        svg { 
          display: flex; 
          width: 350px; height: auto; 
align-items: center;
justify-content: center;
margin-top: 60px;}

.gallery-container {
    position: fixed; /* Hace que la galería se mantenga fija a la izquierda */
    top: 0;
    left: 0;
    bottom: 0;
    width: 100px; /* Ajusta este valor según el ancho deseado para tu galería */
    overflow-y: auto; /* Permite desplazamiento vertical si el contenido excede la altura */
    background-color: #f9f9f9; /* Color de fondo, ajústalo según tu diseño */
    padding: 10px 0; /* Espacio superior e inferior dentro de la galería */
    z-index: 1000; /* Asegura que la galería esté sobre otros elementos */
    background-color: #ffea00;
    border: dashed #bdbdbd ;

}

.gallery-container img {
    width: 80%; /* Hace que las imágenes se ajusten al ancho de la galería */
    margin: 10px 10%; /* Espacio alrededor de las imágenes */
    cursor: pointer;
    display: block; /* Asegura que las imágenes se muestren una debajo de la otra */
}

        

        .main-content {
    margin-left: 500px; /* Ajusta según el ancho de tu galería */
    padding-top: 70px;
    padding-bottom: 100px; 
}


@media (max-width: 767px) {
    .main-content {
        margin-left: 200px; /* Remueve el margen izquierdo para pantallas pequeñas */
        padding: 30px 30px; /* Añade algo de padding para no pegar el contenido a los bordes */
        width: auto; /* Asegura que el contenido se expanda de manera apropiada */
        max-width: 50%; /* Previene que el contenido exceda el ancho de la pantalla */
        box-sizing: border-box; /* Incluye el padding dentro del ancho definido */
    padding-top: 90px;
    margin-top: 60px;}


    }
    
   

    /* Opcional: Esconde la galería en pantallas muy pequeñas para dar más espacio al contenido principal */
 
    
}
@media (max-width: 767px) {
    #navbar {
        flex-direction: column; /* Cambia la orientación de los elementos del navbar a vertical */
        padding: 10px 0; /* Ajusta el padding para dar más espacio */
        background-color: transparent;
    }

    .navbar-nav {
        margin-bottom: 15px; /* Añade espacio debajo del menú para evitar que se pegue al contenido */
        background-color: transparent;

      }

    .navbar-toggler {
        margin: 0 auto; /* Centra el botón del menú */
    }

    .navbar-brand {
        margin-bottom: 10px; /* Añade espacio debajo del título/brand */
    }
}
@media (max-width: 768px) {
    .gallery-container {
        width: 50px; /* Reduce el ancho de la galería para ahorrar espacio */
        overflow-y: auto; /* Permite el desplazamiento vertical */
    }

    .gallery-container img {
        width: 100%; /* Hace que las imágenes llenen el contenedor */
        margin: 5px 0; /* Reduce el margen para ahorrar espacio */
    }
}



footer {
    text-align: center;
    padding: 5px 0;
    background-color: transparent;
    color: #bffa6c;
    position: fixed;
    bottom: 0;
    width: 100%;
}

footer:hover {
color: #000000;
text-decoration: none; /* Elimina el subrayado de los enlaces */

}

.print-button {
    margin: 50px auto;
    padding: 5px 10px;
    background-color: #e1e1e5 transparent;
    color: rgb(68, 68, 68);
    border: none;
    border-radius: 5px;
    cursor: pointer;
    margin-top: 1px;

}

.print-button:hover {
    background-color: #b2eef3;
}
.image-controls button {
    margin: 50px auto;
    padding: 5px 10px;
    background-color: #e1e1e5 transparent;
    color: rgb(78, 78, 78);
    border: none;
    border-radius: 5px;
    cursor: pointer;
    margin-top: 1px;

}
#color-picker{
  margin:  auto;
  height: 40px;
    background-color: #e1e1e5 transparent;
    color: rgb(78, 78, 78);
    border: none;
    border-radius: 5px;
    cursor: pointer;


        }

.image-controls button:hover {
    background-color: #b2eef3;
    border: dashed #b2eef3;
}


/* Ajustes generales para los controles */
.image-controls-container {
    display: flex;
    justify-content: center; /* Centra los controles horizontalmente */
    align-items: center; /* Centra los controles verticalmente */
    flex-wrap: wrap; /* Permite que los controles se ajusten en filas según el ancho disponible */
    margin-top: 3px; /* Espacio entre los controles y el contenido arriba */
}

.image-controls button, .image-controls #color-picker {
    margin: 5px; /* Espaciado alrededor de cada control */
    padding: 10px; /* Aumenta el área táctil para dispositivos móviles */
}




.button-active {
    background-color: #bffa88; /* Color de fondo cuando está activo */
}

button:focus, .button-class:focus {
    outline: none;
    border: dashed #3c3c3c ;
}

button:focus, .button-class:focus {
    outline: none;
    background-color: #ebebeb; /* Color de fondo más claro al enfocar */
}

.no-scroll {
    touch-action: none;
}


@media (max-width: 768px) {
    .image-controls-container {
        display: flex;
        justify-content: center; /* Centra los controles horizontalmente */
        align-items: center; /* Centra los controles verticalmente */
        width: 100%; /* Asegura que ocupa todo el ancho disponible */
        margin: 10px auto; /* Espacio arriba y abajo y centrado horizontal */
       
    }

    .image-controls button, .image-controls #color-picker {
        display: flex;
        margin: 5px; /* Espaciado alrededor de cada control */
        /* Asegúrate de que los botones y el selector de color ocupen un ancho significativo para facilitar la interacción */
        width: 80%;
        max-width: 300px; /* Evita que los controles sean demasiado anchos */
    }
}
</style>

    </style>
</head>

<body>

    <header id="header">

        <nav class="navbar navbar-expand-lg navbar-light bg-light">
            <a class="navbar-brand" href="index.html">ARTE & PSIQUE</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
                aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <div id="menu-links" class="navbar-nav">
                    
<a class="nav-link" href="https://soundtarot.com/">Tarot FQ</a>
<a class="nav-link" href="collage.html">Collage</a>
<button id="logout-btn">Log-Out</button>








                </div>
            </nav>



        </header>


     

        </div>

        <section>
        </section>
        

       
<p> 


</p>


<div class="gallery-container">
    <img src="loc.svg" alt="Mandala Loc" data-svg="loc.svg">
    <img src="mago.svg" alt="Mandala Mago" data-svg="mago.svg">
    <img src="papisa.svg" alt="Mandala Dol" data-svg="dol.svg">
    <img src="emperatriz.svg" alt="Mandala Emperatriz" data-svg="emperatriz.svg">
    <img src="emperador.svg" alt="Mandala Emperador" data-svg="emperador.svg">
    <img src="papa.svg" alt="Mandala Papa" data-svg="papa.svg">
    <img src="7.svg" alt="Mandala Enamorados" data-svg="enamorados.svg">
    <img src="7.svg" alt="Mandala 7" data-svg="7.svg">

    <img src="justicia.svg" alt="Mandala Justicia" data-svg="justicia.svg">
    <img src="hermit.svg" alt="Mandala Justicia" data-svg="justicia.svg">
    <img src="rueda.svg" alt="Mandala Templanza" data-svg="templanza.svg">
    <img src="fuerza.svg" alt="Mandala Fuerza" data-svg="fuerza.svg">
    <img src="colg.svg" alt="Mandala Colg" data-svg="colg.svg">
    <img src="13.svg" alt="Mandala 13" data-svg="13.svg">
    <img src="templanza.svg" alt="Mandala Templanza" data-svg="templanza.svg">

    <img src="diablo.svg" alt="Mandala Diablo" data-svg="diablo.svg">
    <img src="torre.svg" alt="Mandala Torre" data-svg="torre.svg">
    <img src="estrella.svg" alt="Mandala Estrella" data-svg="estrella.svg">
    <img src="luna.svg" alt="Mandala Templanza" data-svg="templanza.svg">
    <img src="dol.svg" alt="Mandala Dol" data-svg="dol.svg">
    <img src="estrella.svg" alt="Mandala Estrella" data-svg="estrella.svg">
    <img src="mundo.svg" alt="Mandala Mundo" data-svg="mundo.svg">
</div>

</div>


<div class="main-content"> 
    <div class="page-container">
        <div class="container d-flex ">
            <div class="row">
                <div class="no-print">

                  
                      <!-- Tus elementos SVG aquí -->
                  </svg>
                  
                    <div id="svgContainer"></div> <!-- El SVG se cargará aquí -->
                </div>
            </div>
        </div>
    </div>

    <div class="image-controls-container">
      <div class="image-controls">
          <button onclick="resizeImage(1.1)"> - </button>
          <button onclick="resizeImage(0.9)">+</button>
          <input type="color" id="color-picker" value="#ff0000" ></i>
          <button id="togglePaintMode"><i class='bx bx-paint button-hover-effect'></i></button>
          <button id="toggleDragMode"><i class='bx bx-move button-hover-effect '></i></button>
          <button onclick="printDocument()" class="print-button"><i class='bx bx-printer ' ></i></button>

      </div>
  </div>
  <div id="loading" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; background: rgb(255, 255, 255); color: rgb(0, 255, 21); z-index: 1000;">
    Cargando...
<img src="collagetarot.gif" alt="">        </div>

      </div>
  </div>
  
<footer>
    <p>© 2024 Arte & Psique® </p>
</footer>
    <script>


let paintHistory = []; 

        function loadSVGAndAddInteractivity(svgFile) {
            const xhr = new XMLHttpRequest();
            xhr.open('GET', svgFile, true);
            xhr.onreadystatechange = function() {
                if (xhr.readyState === 4 && xhr.status === 200) {
                    const container = document.getElementById('svgContainer');
                    container.innerHTML = xhr.responseText;
                    applyInteractivity();
                }
            };
            xhr.send();
        }


        function applyInteractivity() {
    document.querySelectorAll('#svgContainer svg path').forEach(path => {
        path.addEventListener('click', function() {
            if (!paintMode) { // Solo rellena si no estamos en modo pincel
                const prevState = {
                    type: 'fill', // Tipo de acción
                    element: this,
                    fill: this.style.fill // Color anterior
                };
                paintHistory.push(prevState);
                this.style.fill = document.getElementById('color-picker').value;
            }
        });
    });
}



        document.querySelectorAll('.gallery-container img').forEach(img => {
            img.addEventListener('click', function() {
                const svgPath = this.getAttribute('data-svg');
                loadSVGAndAddInteractivity(svgPath);
            });
        });

        window.addEventListener('load', () => {
            // Carga el primer SVG automáticamente si existe
            const firstSVGImage = document.querySelector('.gallery-container img');
            if(firstSVGImage) {
                const firstSVGPath = firstSVGImage.getAttribute('data-svg');
                loadSVGAndAddInteractivity(firstSVGPath);
            }
        });

        function resizeImage(scaleFactor) {
    var svg = document.querySelector("#svgContainer svg"); // Selecciona el SVG dentro del contenedor
    if (svg) {
        // Obtiene las dimensiones actuales del SVG
        var currentWidth = svg.viewBox.baseVal.width || svg.getBoundingClientRect().width;
        var currentHeight = svg.viewBox.baseVal.height || svg.getBoundingClientRect().height;

        // Calcula las nuevas dimensiones
        var newWidth = currentWidth * scaleFactor;
        var newHeight = currentHeight * scaleFactor;

        // Aplica las nuevas dimensiones al viewBox del SVG para redimensionarlo
        svg.viewBox.baseVal.width = newWidth;
        svg.viewBox.baseVal.height = newHeight;

        // OPCIONAL: Si también deseas ajustar las dimensiones del elemento SVG (no solo el viewBox)
        svg.setAttribute("width", newWidth + "px");
        svg.setAttribute("height", newHeight + "px");

        console.log("SVG redimensionado a:", newWidth, newHeight); // Para depuración
    }
}



let isDraggable = false;
function toggleDragMode() {
    isDraggable = !isDraggable; // Cambia el estado de isDraggable
    const button = document.getElementById("toggleDragMode"); // Asume que este es el ID de tu botón

    // Aquí, 'interact' es utilizado para habilitar o deshabilitar la funcionalidad arrastrable
    interact("#svgContainer svg").draggable({
        enabled: isDraggable,
        listeners: {
            move(event) {
                if (!isDraggable) return; // No hacer nada si el arrastre está desactivado
                
                let target = event.target,
                    x = (parseFloat(target.getAttribute('data-x')) || 0) + event.dx,
                    y = (parseFloat(target.getAttribute('data-y')) || 0) + event.dy;
                
                target.style.transform = `translate(${x}px, ${y}px)`;
                target.setAttribute('data-x', x);
                target.setAttribute('data-y', y);
            }
        }
    });

    // Añade o quita la clase 'button-active' basado en el estado de 'isDraggable'
    if (isDraggable) {
        button.classList.add("button-active");
    } else {
        button.classList.remove("button-active");
    }
}




// Agrega un listener al botón para cambiar los modos al hacer clic
document.getElementById("toggleDragMode").addEventListener("click", toggleDragMode);

let paintMode = false;

// Función para alternar el modo pincel
function togglePaintMode() {
    paintMode = !paintMode;
    const button = document.getElementById("togglePaintMode");

    if (paintMode) {
        activatePainting();
        button.classList.add("button-active"); // Añade la clase cuando está activo
    } else {
        deactivatePainting();
        button.classList.remove("button-active"); // Remueve la clase cuando no está activo
    }
}







// Función para activar la pintura
function activatePainting() {
    const svgContainer = document.getElementById("svgContainer");
    svgContainer.addEventListener('mousemove', paint);
}

// Función para desactivar la pintura
function deactivatePainting() {
    const svgContainer = document.getElementById("svgContainer");
    svgContainer.removeEventListener('mousemove', paint);
}

// Arreglo para almacenar el historial de elementos agregados al SVG


// Función modificada para agregar pintura al SVG y al historial
function paint(event) {
    if (!paintMode) return;
    const svg = document.querySelector("#svgContainer svg");
    // Resto del código para crear el elemento...
    let newElement = "#svgContainer svg";
    svg.appendChild(newElement);
    paintHistory.push({type: 'draw', element: newElement}); // Agregamos el nuevo elemento al historial
}


function paint(event) {
    if (!paintMode) return;

    // Obtiene el elemento SVG y su punto en el espacio del viewport
    const svg = document.querySelector("#svgContainer svg");
    const pt = svg.createSVGPoint();
    
    // Ajusta las coordenadas del punto al evento del mouse
    pt.x = event.clientX;
    pt.y = event.clientY;

    // Transforma las coordenadas del punto al espacio del SVG∫
    const svgPoint = pt.matrixTransform(svg.getScreenCTM().inverse());
    
    const color = document.getElementById("color-picker").value;

    // Crea un nuevo círculo en la posición transformada
    let newElement = document.createElementNS("http://www.w3.org/2000/svg", "circle");
    newElement.setAttribute("cx", svgPoint.x); // Usa la coordenada X transformada
    newElement.setAttribute("cy", svgPoint.y); // Usa la coordenada Y transformada
    newElement.setAttribute("r", 2); // Tamaño del "pincel"
    newElement.setAttribute("fill", color);

    svg.appendChild(newElement);
    paintHistory.push(newElement);

    paintHistory.push({type: 'draw', element: newElement});

}


function undoPaint() {
    if (paintHistory.length > 0) {
        const lastAction = paintHistory.pop(); // Obtiene la última acción
        
        if (lastAction.type === 'fill') {
            // Deshacer relleno: Restaurar el color anterior
            lastAction.element.style.fill = lastAction.fill;
        } else if (lastAction.type === 'draw') {
            // Deshacer dibujo: Eliminar el último elemento dibujado
            lastAction.element.remove();
        }
    }
}

// Listener para Ctrl+Z
document.addEventListener("keydown", function(event) {
    if (event.ctrlKey && event.key === 'z') {
        undoPaint();
    }
});



// Event listener para detectar Ctrl+Z
document.addEventListener("keydown", function(event) {
    // Verifica si se presionó Ctrl+Z
    if (event.ctrlKey && event.key === 'z') {
        undoPaint();
    }
});



// Agrega el listener al botón de modo pincel


document.getElementById("togglePaintMode").addEventListener("click", function(e) {
    e.preventDefault(); // Previene la acción predeterminada para click
    togglePaintMode(); // Llama a la función al hacer click
});

// Listener para touchstart
document.getElementById("togglePaintMode").addEventListener("touchstart", function(e) {
    e.preventDefault(); // Previene la acción predeterminada para touch
    togglePaintMode(); // Llama a la función al tocar
});

// Función para deshacer el último trazo de pintura


function printDocument() {
    window.print();
}



function activatePainting() {
    const svgContainer = document.getElementById("svgContainer");
    svgContainer.addEventListener('mousemove', paint);
    svgContainer.addEventListener('touchmove', paint, {passive: false});
}

function deactivatePainting() {
    const svgContainer = document.getElementById("svgContainer");
    svgContainer.removeEventListener('mousemove', paint);
    svgContainer.removeEventListener('touchmove', paint);
}

function paint(event) {
    event.preventDefault(); // Previene el desplazamiento de la página al pintar en dispositivos táctiles
    if (!paintMode) return;

    let clientX, clientY;
    if (event.touches) {
        // Evento táctil
        clientX = event.touches[0].clientX;
        clientY = event.touches[0].clientY;
    } else {
        // Evento del mouse
        clientX = event.clientX;
        clientY = event.clientY;
    }

    // Obtiene el elemento SVG y su punto en el espacio del viewport
    const svg = document.querySelector("#svgContainer svg");
    const pt = svg.createSVGPoint();

    // Ajusta las coordenadas del punto al evento del mouse/touch
    pt.x = clientX;
    pt.y = clientY;

    // Transforma las coordenadas del punto al espacio del SVG
    const svgPoint = pt.matrixTransform(svg.getScreenCTM().inverse());
    
    const color = document.getElementById("color-picker").value;

    // Crea un nuevo círculo en la posición transformada
    let newElement = document.createElementNS("http://www.w3.org/2000/svg", "circle");
    newElement.setAttribute("cx", svgPoint.x);
    newElement.setAttribute("cy", svgPoint.y);
    newElement.setAttribute("r", 2); // Ajusta el radio según sea necesario
    newElement.setAttribute("fill", color);

    svg.appendChild(newElement);
    // Aquí puedes decidir si agregar o no el nuevoElement a paintHistory para la funcionalidad de deshacer
}


    </script>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>


</body>

</html>
